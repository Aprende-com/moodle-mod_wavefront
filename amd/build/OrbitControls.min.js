define ("mod_wavefront/OrbitControls",["exports","mod_wavefront/three"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.MapControls=a.OrbitControls=void 0;function c(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){c=function(a){return typeof a}}else{c=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return c(a)}function d(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function e(a,b){if("function"!=typeof b&&null!==b){throw new TypeError("Super expression must either be null or a function")}a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});if(b)f(a,b)}function f(a,b){f=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return f(a,b)}function g(a){return function(){var b=k(a),c;if(j()){var d=k(this).constructor;c=Reflect.construct(b,arguments,d)}else{c=b.apply(this,arguments)}return h(this,c)}}function h(a,b){if(b&&("object"===c(b)||"function"==typeof b)){return b}return i(a)}function i(a){if(void 0===a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return a}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return!0}catch(a){return!1}}function k(a){k=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return k(a)}var l={type:"change"},m={type:"start"},n={type:"end"},o=function(a){e(c,a);var f=g(c);function c(a,e){var X;d(this,c);X=f.call(this);if(e===void 0)console.warn("THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.");if(e===document)console.error("THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.");X.object=a;X.domElement=e;X.domElement.style.touchAction="none";X.enabled=!0;X.target=new b.Vector3;X.minDistance=0;X.maxDistance=1/0;X.minZoom=0;X.maxZoom=1/0;X.minPolarAngle=0;X.maxPolarAngle=Math.PI;X.minAzimuthAngle=-Infinity;X.maxAzimuthAngle=1/0;X.enableDamping=!1;X.dampingFactor=.05;X.enableZoom=!0;X.zoomSpeed=1;X.enableRotate=!0;X.rotateSpeed=1;X.enablePan=!0;X.panSpeed=1;X.screenSpacePanning=!0;X.keyPanSpeed=7;X.autoRotate=!1;X.autoRotateSpeed=2;X.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"};X.mouseButtons={LEFT:b.MOUSE.ROTATE,MIDDLE:b.MOUSE.DOLLY,RIGHT:b.MOUSE.PAN};X.touches={ONE:b.TOUCH.ROTATE,TWO:b.TOUCH.DOLLY_PAN};X.target0=X.target.clone();X.position0=X.object.position.clone();X.zoom0=X.object.zoom;X._domElementKeyEvents=null;X.getPolarAngle=function(){return aa.phi};X.getAzimuthalAngle=function(){return aa.theta};X.getDistance=function(){return this.object.position.distanceTo(this.target)};X.listenToKeyEvents=function(a){a.addEventListener("keydown",P);this._domElementKeyEvents=a};X.saveState=function(){Y.target0.copy(Y.target);Y.position0.copy(Y.object.position);Y.zoom0=Y.object.zoom};X.reset=function(){Y.target.copy(Y.target0);Y.object.position.copy(Y.position0);Y.object.zoom=Y.zoom0;Y.object.updateProjectionMatrix();Y.dispatchEvent(l);Y.update();$=Z.NONE};X.update=function(){var c=new b.Vector3,d=new b.Quaternion().setFromUnitVectors(a.up,new b.Vector3(0,1,0)),e=d.clone().invert(),f=new b.Vector3,h=new b.Quaternion,i=2*Math.PI;return function(){var a=Y.object.position;c.copy(a).sub(Y.target);c.applyQuaternion(d);aa.setFromVector3(c);if(Y.autoRotate&&$===Z.NONE){j(g())}if(Y.enableDamping){aa.theta+=ba.theta*Y.dampingFactor;aa.phi+=ba.phi*Y.dampingFactor}else{aa.theta+=ba.theta;aa.phi+=ba.phi}var b=Y.minAzimuthAngle,k=Y.maxAzimuthAngle;if(isFinite(b)&&isFinite(k)){if(b<-Math.PI)b+=i;else if(b>Math.PI)b-=i;if(k<-Math.PI)k+=i;else if(k>Math.PI)k-=i;if(b<=k){aa.theta=Math.max(b,Math.min(k,aa.theta))}else{aa.theta=aa.theta>(b+k)/2?Math.max(b,aa.theta):Math.min(k,aa.theta)}}aa.phi=Math.max(Y.minPolarAngle,Math.min(Y.maxPolarAngle,aa.phi));aa.makeSafe();aa.radius*=ca;aa.radius=Math.max(Y.minDistance,Math.min(Y.maxDistance,aa.radius));if(!0===Y.enableDamping){Y.target.addScaledVector(da,Y.dampingFactor)}else{Y.target.add(da)}c.setFromSpherical(aa);c.applyQuaternion(e);a.copy(Y.target).add(c);Y.object.lookAt(Y.target);if(!0===Y.enableDamping){ba.theta*=1-Y.dampingFactor;ba.phi*=1-Y.dampingFactor;da.multiplyScalar(1-Y.dampingFactor)}else{ba.set(0,0,0);da.set(0,0,0)}ca=1;if(ea||f.distanceToSquared(Y.object.position)>_||8*(1-h.dot(Y.object.quaternion))>_){Y.dispatchEvent(l);f.copy(Y.object.position);h.copy(Y.object.quaternion);ea=!1;return!0}return!1}}();X.dispose=function(){Y.domElement.removeEventListener("contextmenu",S);Y.domElement.removeEventListener("pointerdown",I);Y.domElement.removeEventListener("pointercancel",L);Y.domElement.removeEventListener("wheel",O);Y.domElement.removeEventListener("pointermove",J);Y.domElement.removeEventListener("pointerup",K);if(null!==Y._domElementKeyEvents){Y._domElementKeyEvents.removeEventListener("keydown",P)}};var Y=i(X),Z={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},$=Z.NONE,_=1e-6,aa=new b.Spherical,ba=new b.Spherical,ca=1,da=new b.Vector3,ea=!1,fa=new b.Vector2,ga=new b.Vector2,ha=new b.Vector2,ia=new b.Vector2,ja=new b.Vector2,ka=new b.Vector2,la=new b.Vector2,ma=new b.Vector2,na=new b.Vector2,oa=[],pa={};function g(){return 2*Math.PI/60/60*Y.autoRotateSpeed}function h(){return Math.pow(.95,Y.zoomSpeed)}function j(a){ba.theta-=a}function k(a){ba.phi-=a}var qa=function(){var a=new b.Vector3;return function(b,c){a.setFromMatrixColumn(c,0);a.multiplyScalar(-b);da.add(a)}}(),ra=function(){var a=new b.Vector3;return function(b,c){if(!0===Y.screenSpacePanning){a.setFromMatrixColumn(c,1)}else{a.setFromMatrixColumn(c,0);a.crossVectors(Y.object.up,a)}a.multiplyScalar(b);da.add(a)}}(),sa=function(){var a=new b.Vector3;return function(b,c){var d=Y.domElement;if(Y.object.isPerspectiveCamera){var e=Y.object.position;a.copy(e).sub(Y.target);var f=a.length();f*=Math.tan(Y.object.fov/2*Math.PI/180);qa(2*b*f/d.clientHeight,Y.object.matrix);ra(2*c*f/d.clientHeight,Y.object.matrix)}else if(Y.object.isOrthographicCamera){qa(b*(Y.object.right-Y.object.left)/Y.object.zoom/d.clientWidth,Y.object.matrix);ra(c*(Y.object.top-Y.object.bottom)/Y.object.zoom/d.clientHeight,Y.object.matrix)}else{console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.");Y.enablePan=!1}}}();function o(a){if(Y.object.isPerspectiveCamera){ca/=a}else if(Y.object.isOrthographicCamera){Y.object.zoom=Math.max(Y.minZoom,Math.min(Y.maxZoom,Y.object.zoom*a));Y.object.updateProjectionMatrix();ea=!0}else{console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.");Y.enableZoom=!1}}function p(a){if(Y.object.isPerspectiveCamera){ca*=a}else if(Y.object.isOrthographicCamera){Y.object.zoom=Math.max(Y.minZoom,Math.min(Y.maxZoom,Y.object.zoom/a));Y.object.updateProjectionMatrix();ea=!0}else{console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.");Y.enableZoom=!1}}function q(a){fa.set(a.clientX,a.clientY)}function r(a){la.set(a.clientX,a.clientY)}function s(a){ia.set(a.clientX,a.clientY)}function t(a){ga.set(a.clientX,a.clientY);ha.subVectors(ga,fa).multiplyScalar(Y.rotateSpeed);var b=Y.domElement;j(2*Math.PI*ha.x/b.clientHeight);k(2*Math.PI*ha.y/b.clientHeight);fa.copy(ga);Y.update()}function u(a){ma.set(a.clientX,a.clientY);na.subVectors(ma,la);if(0<na.y){o(h())}else if(0>na.y){p(h())}la.copy(ma);Y.update()}function v(a){ja.set(a.clientX,a.clientY);ka.subVectors(ja,ia).multiplyScalar(Y.panSpeed);sa(ka.x,ka.y);ia.copy(ja);Y.update()}function w(a){if(0>a.deltaY){p(h())}else if(0<a.deltaY){o(h())}Y.update()}function x(a){var b=!1;switch(a.code){case Y.keys.UP:sa(0,Y.keyPanSpeed);b=!0;break;case Y.keys.BOTTOM:sa(0,-Y.keyPanSpeed);b=!0;break;case Y.keys.LEFT:sa(Y.keyPanSpeed,0);b=!0;break;case Y.keys.RIGHT:sa(-Y.keyPanSpeed,0);b=!0;break;}if(b){a.preventDefault();Y.update()}}function y(){if(1===oa.length){fa.set(oa[0].pageX,oa[0].pageY)}else{var a=.5*(oa[0].pageX+oa[1].pageX),b=.5*(oa[0].pageY+oa[1].pageY);fa.set(a,b)}}function z(){if(1===oa.length){ia.set(oa[0].pageX,oa[0].pageY)}else{var a=.5*(oa[0].pageX+oa[1].pageX),b=.5*(oa[0].pageY+oa[1].pageY);ia.set(a,b)}}function A(){var a=oa[0].pageX-oa[1].pageX,b=oa[0].pageY-oa[1].pageY,c=Math.sqrt(a*a+b*b);la.set(0,c)}function B(){if(Y.enableZoom)A();if(Y.enablePan)z()}function C(){if(Y.enableZoom)A();if(Y.enableRotate)y()}function D(a){if(1==oa.length){ga.set(a.pageX,a.pageY)}else{var b=W(a),c=.5*(a.pageX+b.x),d=.5*(a.pageY+b.y);ga.set(c,d)}ha.subVectors(ga,fa).multiplyScalar(Y.rotateSpeed);var e=Y.domElement;j(2*Math.PI*ha.x/e.clientHeight);k(2*Math.PI*ha.y/e.clientHeight);fa.copy(ga)}function E(a){if(1===oa.length){ja.set(a.pageX,a.pageY)}else{var b=W(a),c=.5*(a.pageX+b.x),d=.5*(a.pageY+b.y);ja.set(c,d)}ka.subVectors(ja,ia).multiplyScalar(Y.panSpeed);sa(ka.x,ka.y);ia.copy(ja)}function F(a){var b=W(a),c=a.pageX-b.x,d=a.pageY-b.y,e=Math.sqrt(c*c+d*d);ma.set(0,e);na.set(0,Math.pow(ma.y/la.y,Y.zoomSpeed));o(na.y);la.copy(ma)}function G(a){if(Y.enableZoom)F(a);if(Y.enablePan)E(a)}function H(a){if(Y.enableZoom)F(a);if(Y.enableRotate)D(a)}function I(a){if(!1===Y.enabled)return;if(0===oa.length){Y.domElement.setPointerCapture(a.pointerId);Y.domElement.addEventListener("pointermove",J);Y.domElement.addEventListener("pointerup",K)}T(a);if("touch"===a.pointerType){Q(a)}else{M(a)}}function J(a){if(!1===Y.enabled)return;if("touch"===a.pointerType){R(a)}else{N(a)}}function K(a){U(a);if(0===oa.length){Y.domElement.releasePointerCapture(a.pointerId);Y.domElement.removeEventListener("pointermove",J);Y.domElement.removeEventListener("pointerup",K)}Y.dispatchEvent(n);$=Z.NONE}function L(a){U(a)}function M(a){var c;switch(a.button){case 0:c=Y.mouseButtons.LEFT;break;case 1:c=Y.mouseButtons.MIDDLE;break;case 2:c=Y.mouseButtons.RIGHT;break;default:c=-1;}switch(c){case b.MOUSE.DOLLY:if(!1===Y.enableZoom)return;r(a);$=Z.DOLLY;break;case b.MOUSE.ROTATE:if(a.ctrlKey||a.metaKey||a.shiftKey){if(!1===Y.enablePan)return;s(a);$=Z.PAN}else{if(!1===Y.enableRotate)return;q(a);$=Z.ROTATE}break;case b.MOUSE.PAN:if(a.ctrlKey||a.metaKey||a.shiftKey){if(!1===Y.enableRotate)return;q(a);$=Z.ROTATE}else{if(!1===Y.enablePan)return;s(a);$=Z.PAN}break;default:$=Z.NONE;}if($!==Z.NONE){Y.dispatchEvent(m)}}function N(a){if(!1===Y.enabled)return;switch($){case Z.ROTATE:if(!1===Y.enableRotate)return;t(a);break;case Z.DOLLY:if(!1===Y.enableZoom)return;u(a);break;case Z.PAN:if(!1===Y.enablePan)return;v(a);break;}}function O(a){if(!1===Y.enabled||!1===Y.enableZoom||$!==Z.NONE)return;a.preventDefault();Y.dispatchEvent(m);w(a);Y.dispatchEvent(n)}function P(a){if(!1===Y.enabled||!1===Y.enablePan)return;x(a)}function Q(a){V(a);switch(oa.length){case 1:switch(Y.touches.ONE){case b.TOUCH.ROTATE:if(!1===Y.enableRotate)return;y();$=Z.TOUCH_ROTATE;break;case b.TOUCH.PAN:if(!1===Y.enablePan)return;z();$=Z.TOUCH_PAN;break;default:$=Z.NONE;}break;case 2:switch(Y.touches.TWO){case b.TOUCH.DOLLY_PAN:if(!1===Y.enableZoom&&!1===Y.enablePan)return;B();$=Z.TOUCH_DOLLY_PAN;break;case b.TOUCH.DOLLY_ROTATE:if(!1===Y.enableZoom&&!1===Y.enableRotate)return;C();$=Z.TOUCH_DOLLY_ROTATE;break;default:$=Z.NONE;}break;default:$=Z.NONE;}if($!==Z.NONE){Y.dispatchEvent(m)}}function R(a){V(a);switch($){case Z.TOUCH_ROTATE:if(!1===Y.enableRotate)return;D(a);Y.update();break;case Z.TOUCH_PAN:if(!1===Y.enablePan)return;E(a);Y.update();break;case Z.TOUCH_DOLLY_PAN:if(!1===Y.enableZoom&&!1===Y.enablePan)return;G(a);Y.update();break;case Z.TOUCH_DOLLY_ROTATE:if(!1===Y.enableZoom&&!1===Y.enableRotate)return;H(a);Y.update();break;default:$=Z.NONE;}}function S(a){if(!1===Y.enabled)return;a.preventDefault()}function T(a){oa.push(a)}function U(a){delete pa[a.pointerId];for(var b=0;b<oa.length;b++){if(oa[b].pointerId==a.pointerId){oa.splice(b,1);return}}}function V(a){var c=pa[a.pointerId];if(c===void 0){c=new b.Vector2;pa[a.pointerId]=c}c.set(a.pageX,a.pageY)}function W(a){var b=a.pointerId===oa[0].pointerId?oa[1]:oa[0];return pa[b.pointerId]}Y.domElement.addEventListener("contextmenu",S);Y.domElement.addEventListener("pointerdown",I);Y.domElement.addEventListener("pointercancel",L);Y.domElement.addEventListener("wheel",O,{passive:!1});X.update();return X}return c}(b.EventDispatcher);a.OrbitControls=o;var p=function(a){e(c,a);var f=g(c);function c(a,e){var g;d(this,c);g=f.call(this,a,e);g.screenSpacePanning=!1;g.mouseButtons.LEFT=b.MOUSE.PAN;g.mouseButtons.RIGHT=b.MOUSE.ROTATE;g.touches.ONE=b.TOUCH.PAN;g.touches.TWO=b.TOUCH.DOLLY_ROTATE;return g}return c}(o);a.MapControls=p});
//# sourceMappingURL=OrbitControls.min.js.map
